{% extends "base.html" %}
{% block title %}Manage Users - Digicam Shop{% endblock %}

{% block css %}
<style>
    .admin-header {
        background: linear-gradient(135deg, var(--teal), var(--burnt-orange));
        color: white;
        padding: 40px 0;
        margin: -30px -15px 30px -15px;
        border-radius: 0 0 20px 20px;
    }
    .admin-header h3 {
        color: white;
        font-size: 2.5rem;
        margin: 0;
    }
    .admin-container {
        background-color: white;
        padding: 30px;
        border-radius: 15px;
        box-shadow: 0 4px 15px rgba(0,0,0,0.1);
    }
</style>
{% endblock %}

{% block content %}
<div class="admin-header text-center">
    <div class="container">
        <h3>ðŸ‘¥ Manage Users</h3>
        <p class="mt-2">Manage customers and admin accounts</p>
    </div>
</div>

<div class="container">
<div class="admin-container">
<div class="table-responsive">
<table class="table table-bordered align-middle">
  <thead class="table-dark">
    <tr>
      <th>Name</th>
      <th>Email</th>
      <th>Role</th>
      <th>Status</th>
      <th width="400">Actions</th>
    </tr>
  </thead>
  <tbody>
    {% for u in users %}
    <tr>
      <td><strong>{{ u.fullname }}</strong></td>
      <td>{{ u.email }}</td>
      <td>
        <span class="badge {% if u.role == 'admin' %}bg-danger{% else %}bg-info{% endif %}">
          {{ u.role }}
        </span>
      </td>
      <td>
        {% if u.is_active %}
          <span class="badge bg-success">Active</span>
        {% else %}
          <span class="badge bg-danger">Inactive</span>
        {% endif %}
      </td>
      <td>
        <div class="d-flex gap-2 align-items-center">
          <!-- Reset Password -->
          <form method="POST"
                action="/admin/users/reset-password/{{ u.id }}"
                class="d-flex gap-2">
            <input type="password"
                   name="password"
                   placeholder="New password"
                   class="form-control form-control-sm"
                   style="width: 150px;"
                   required>
            <button class="btn btn-warning btn-sm">Reset</button>
          </form>

          <!-- Activate / Deactivate -->
          <a href="/admin/users/toggle/{{ u.id }}"
             class="btn btn-sm btn-secondary">
             {% if u.is_active %}Deactivate{% else %}Activate{% endif %}
          </a>
        </div>
      </td>
    </tr>
    {% endfor %}
  </tbody>
</table>
</div>
</div>
</div>
{% endblock %}
